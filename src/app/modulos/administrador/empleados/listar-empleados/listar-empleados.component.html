<div class="row mb-2">

    <div class="col-12">
        <h2 style="margin: 0px;">Empleados</h2>
    </div>

    <div class="col-12">
        <button class="btn btn-primary" routerLink="/administrador/empleados/crear">Crear <i class="fas fa-plus-circle fa-lg"></i></button>
    </div>

</div>


<div class="row">
    <div class="col-12 col-sm-12 col-md-6 col-lg-4">
        <div class="form-group has-default">
            <label class="label-control mb-3">Buscar</label>
            <input type="text" class="form-control" #filtroTexto>
        </div>
    </div>

    <div class="col-12 col-sm-12 col-md-6 col-lg-4">
        <div class="form-group">
            <label class="label-control">Filtrar por estado</label>
            <select class="form-control selectpicker show-tick" #filtroEstado data-style="btn btn-default" title=""
                data-size="7" data-live-search="false">
                <option value="">Ninguno</option>
                <option value="Activo">Activo</option>
                <option value="Inactivo">Inactivo</option>
            </select>
        </div>
    </div>

    <div class="col-12 col-sm-12 col-md-6 col-lg-4">
        <button class="btn btn-primary btn-buscar" (click)="filtrarDatos()"><i class="fas fa-search fa-lg"></i></button>
    </div>

</div>

<div class="mb-4">
    <ngx-datatable class="material" [rows]="rows" [scrollbarH]="true" [messages]="messages"
        [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50" rowHeight="auto" [limit]="15">


        <ngx-datatable-column name="CUI">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>CUI</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.cui}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Nombre" [width]="225">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Nombre</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.primer_nombre + ' ' + row.segundo_nombre + ' ' + row.primer_apellido + ' ' + row.segundo_apellido}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Telefono">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Telefono</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.telefono}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Puesto">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Puesto</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.puesto}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="tiene_usuario">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Tiene Usuario</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.tiene_usuario}}
            </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Estado" [width]="65">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Estado</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                {{row.estado}}
            </ng-template>
        </ngx-datatable-column>


        <ngx-datatable-column name="Acciones" [width]="200">
            <ng-template let-column="column" ngx-datatable-header-template>
                <span>Acciones</span>
            </ng-template>
            <ng-template let-row="row" ngx-datatable-cell-template>
                
                <button *ngIf="row.tiene_usuario == 'no'" class="btn btn-primary btn-sm"
                    (click)="crearUsuario(row)" data-toggle="tooltip" title="Crear usuario"><i class="fas fa-user-plus fa-lg"></i></button>

                    <button *ngIf="row.tiene_usuario == 'si'" class="btn btn-primary btn-sm"
                    (click)="modificarUsuario(row)" data-toggle="tooltip" title="Editar usuario"><i class="fas fa-user-edit fa-lg"></i></button>

                <button *ngIf="row.estado == 'Activo'" class="btn btn-primary btn-sm"
                    (click)="darDeBaja(row)" data-toggle="tooltip" title="Dar de baja"><i
                        class="fas fa-exclamation-triangle fa-lg"></i></button>

                        <button *ngIf="row.estado == 'Inactivo'" class="btn btn-primary btn-sm"
                    (click)="reactivarEmpleado(row)" data-toggle="tooltip" title="Reactivar empleado"><i class="fas fa-toggle-on fa-lg"></i></button>
                        
                <button *ngIf="row.estado == 'Activo'" class="btn btn-primary btn-sm" (click)="editarEmpleado(row)"
                    data-toggle="tooltip" title="Editar"><i class="fas fa-edit fa-lg"></i></button>

                <button class="btn btn-primary btn-sm" (click)="detalleEmpleado(row)" data-toggle="tooltip"
                    title="Detalles"><i class="fas fa-info-circle fa-lg"></i></button>

            </ng-template>
        </ngx-datatable-column>

    </ngx-datatable>
</div>